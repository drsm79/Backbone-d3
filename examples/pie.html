<html>
	<head>
	  <title>Backbone.d3 - Pie charts</title>

	  <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="scripts/jquery.js" type='text/javascript'> </script>
    <script src="scripts/underscore-min.js" type="text/javascript"> </script>
    <script src="scripts/backbone.js" type="text/javascript"> </script>
    <script src="scripts/d3.min.js" type="text/javascript"> </script>
    <script src="scripts/d3.layout.min.js" type="text/javascript"> </script>
    <script src="../backbone-d3.js" type="text/javascript"> </script>

    <script type="text/javascript">

      $(function() {
        var DataPoint = Backbone.Model.extend({
          initialize: function(value) {
            this.set(value);
          }
        });

        var DataSeries = Backbone.d3.PlotCollection.extend({
          model : DataPoint,
          url : "data",
          plottype: "pie",
          fetch: function(){
            // No op
            console.log('fetching is a no op in this example');
          }
        });

        var series = new DataSeries();
        var plot = Backbone.d3.getView(series, {div:'#plot1'});
        series.reset([new DataPoint({id: 1, value: 3}),
          new DataPoint({id: 2, value: 2}),
          new DataPoint({id: 3, value: 6}),
          new DataPoint({id: 4, value: 3})]);
        _.each(_.range(1,5), function(i, ii, l) {
          setTimeout(function() {
             var m = plot.collection.get(i);
             m.set({value:4*i});
          }, i * 1000);
        })
      });
    </script>
  </head>
  <body>
    <div id="container">
      <h1>Pie charts</h1>
      <p>Backbone-d3 currently supports simple pie charts with transitions.
         Changing values in a collection causes the pie chart to update to the
         new ratios.</p>
      <table width="100%">
        <tr>
          <td width="50%" align="center">
            <h3>Static plot<div id="plot1"></div></h3>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>